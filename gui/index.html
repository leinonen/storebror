<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Storebror</title>
	<link rel="stylesheet" href="components/bootstrap/dist/css/bootstrap.css">
</head>
<body ng-app="app">

	<div class="container" ng-controller="AppController as vm">
		<h1>{{vm.title}}</h1>

		<h2>Connected clients</h2>

		<p ng-show="vm.clients.length === 0">No connected clients</p>

		<div ng-repeat="client in vm.clients">

			<h3>Client: {{client.client_id}}</h3>
			<p>Last updated {{client.lastUpdate}}</p>
			<h4>System information</h4>
			<table class="table">
				<tr>
					<th class="col-sm-2">Hostname</th>
					<th class="col-sm-2">IP</th>
					<th class="col-sm-2">Platform</th>
					<th class="col-sm-2">Architecture</th>
					<th class="col-sm-2">Free Memory</th>
					<th class="col-sm-2">Total Memory</th>
				</tr>
				<tr>
					<td>{{client.sysinfo.hostname}}</td>
					<td>{{client.sysinfo.local}}</td>
					<td>{{client.sysinfo.platform}}</td>
					<td>{{client.sysinfo.arch}}</td>
					<td>{{client.sysinfo.freemem}}</td>
					<td>{{client.sysinfo.totalmem}}</td>
				</tr>
			</table>

			<h4>CPU</h4>
			<table class="table">
				<tr>
					<th class="col-sm-2">Number of Cores</th>
					<th class="col-sm-2">Model</th>
					<th class="col-sm-2">Speed</th>
				</tr>
				<tr>
					<td>{{client.sysinfo.cpus.length}}</td>
					<td>{{client.sysinfo.cpus[0].model}}</td>
					<td>{{client.sysinfo.cpus[0].speed}} MHz</td>
				</tr>
			</table>

			<h4>Mounted filesystems</h4>
			<table class="table">
				<tr>
						<th class="col-sm-2">Filesystem</th>
						<th class="col-sm-4">Mounted on</th>
						<th class="col-sm-2">Size</th>
						<th class="col-sm-2">Used</th>
						<th class="col-sm-2">Avail</th>
				</tr>
				<tr ng-repeat="disk in client.diskinfo">
						<td>{{disk.filesystem}}</td>
						<td>{{disk.mounted}}</td>
						<td>{{disk.size}}</td>
						<td>{{disk.used}}</td>
						<td>{{disk.avail}}</td>
				</tr>
			</table>

		</div>

	</div>

	<script src="components/angular/angular.js"></script>
	<script src="app.js"></script>
</body>
</html>